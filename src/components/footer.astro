---
import clsx from "clsx/lite";
import Link from "./link.astro";
import Navigation from "./navigation";
import { NAV_ITEMS } from "../lib/nav";

const pathname = Astro.url.pathname;
const isHome = pathname === "/" || pathname === "/index";

const items = [
  ...(isHome ? [] : [{ href: "/", label: "Home" }]),
  ...NAV_ITEMS,
];

const works = NAV_ITEMS.find((i) => i.href === "/works");
const about = NAV_ITEMS.find((i) => i.href === "/about");
---

<footer
class={clsx(
  "fixed inset-x-0 bottom-0 z-40 pr-6 py-6",
  isHome ? "bg-transparent" : "bg-neutral-950"
)}
>
  <div class="flex justify-end">
    <!-- Desktop -->
    <div class="hidden md:flex items-center gap-4 flex-wrap justify-end">
      {items.map((item) =>
        item.href === "/" ? (
          <Link href="/" variant="icon" className="group">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              aria-hidden="true"
              class="w-6 h-6 text-neutral-100 group-hover:text-neutral-200"
            >
              <title>Home</title>
              <path
                fill="currentColor"
                fill-rule="evenodd"
                d="M2.335 7.875c-.54 1.127-.35 2.446.03 5.083l.278 1.937c.487 3.388.731 5.081 1.906 6.093S7.447 22 10.894 22h2.212c3.447 0 5.17 0 6.345-1.012s1.419-2.705 1.906-6.093l.279-1.937c.38-2.637.57-3.956.029-5.083s-1.691-1.813-3.992-3.183l-1.385-.825C14.2 2.622 13.154 2 12 2s-2.199.622-4.288 1.867l-1.385.825c-2.3 1.37-3.451 2.056-3.992 3.183M8.25 18a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75"
                clip-rule="evenodd"
              />
            </svg>
          </Link>
        ) : (
          <Link href={item.href} variant="secondary">
            {item.label}
          </Link>
        )
      )}
    </div>

    <!-- Mobile -->
    <div class="md:hidden">
      <Navigation client:load items={items} />

      {isHome && works && about && (
        <div class="fixed left-4 bottom-4 sm:left-8 sm:bottom-8 z-50 flex items-center gap-4">
          <Link href={works.href}>{works.label}</Link>
          <Link href={about.href} variant="secondary">
            {about.label}
          </Link>
        </div>
      )}
    </div>
  </div>
</footer>