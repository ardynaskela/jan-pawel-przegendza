---
import { getCollection, getEntryBySlug } from "astro:content";

export async function getStaticPaths() {
  const items = await getCollection("media");
  return items.map((i) => ({ params: { slug: i.slug } }));
}

const entry = await getEntryBySlug("media", Astro.params.slug);
if (!entry) throw new Error("Not found");

const { title, fileUrl, file, alt } = entry.data;
const href = fileUrl || file;
---

<h1>{title}</h1>
<p>{alt}</p>
{href ? <a href={href} target="_blank" rel="noopener">Open file</a> : <p>Missing file.</p>}