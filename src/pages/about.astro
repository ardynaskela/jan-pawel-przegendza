---
import H1 from "../components/h1.astro";
import H2 from "../components/h2.astro";
import InfoLayout from "../layouts/InfoLayout.astro";
import { getEntry } from "astro:content";

type Award = {
  title: string;
  year?: number;
  description?: string;
};

const entry = await getEntry("about", "about");
if (!entry) throw new Error("Missing about entry: src/content/about/about.md");

const { Content } = await entry.render();

const title = entry.data.title ?? "Jan Paweł Przegendza";
const awards: Award[] = entry.data.awards ?? [];

const imageSrc = entry.data.photo ?? "/uploads/jan-przegendza.jpg";
const imageAlt = entry.data.photoAlt ?? title;
---

<InfoLayout imageSrc={imageSrc} imageAlt={imageAlt}>
  <div class="space-y-16">
    <section class="space-y-4 sm:space-y-6">
      <H1>{title}</H1>
      <div class="prose prose-invert max-w-none prose-lg xl:prose-xl prose-p:leading-snug prose-li:leading-snug">
        <Content />
      </div>
    </section>
<section class="space-y-4 sm:space-y-6">
  <H2>Awards</H2>

  {awards.length > 0 ? (
<ul class="text-neutral-200 space-y-2 list-none pl-0 ml-0 prose prose-invert max-w-none prose-lg xl:prose-xl prose-p:leading-snug prose-li:leading-snug">
  {awards.map((a: Award) => (
    <li class="flex items-start gap-2">
      <span aria-hidden="true" class="shrink-0 leading-snug">
        {"\u268A"}
      </span>

      <div class="min-w-0">
        <span class="font-medium">{a.title}</span>
        {a.year && <span> ({a.year})</span>}
        {a.description && <span> — {a.description}</span>}
      </div>
    </li>
  ))}
</ul>
  ) : (
    <p class="text-neutral-200">No awards yet.</p>
  )}
</section>
  </div>
</InfoLayout>