---
import H1 from "../components/h1.astro";
import H2 from "../components/h2.astro";
import InfoLayout from "../layouts/InfoLayout.astro";
import { getEntry } from "astro:content";

type Award = {
  title: string;
  year?: number;
  description?: string;
};

const entry = await getEntry("about", "about");
if (!entry) throw new Error("Missing about entry: src/content/about/about.md");

const { Content } = await entry.render();

const title = entry.data.title ?? "Jan Paweł Przegendza";
const awards: Award[] = entry.data.awards ?? [];

const imageSrc = entry.data.photo ?? "/uploads/jan-przegendza.jpg";
const imageAlt = entry.data.photoAlt ?? title;
---

<InfoLayout imageSrc={imageSrc} imageAlt={imageAlt}>
  <div class="space-y-16">
    <section class="space-y-4">
      <H1>{title}</H1>
      <div class="prose prose-invert max-w-none leading-none prose-base md:prose-lg xl:prose-xl">
                <Content />
              </div>
    </section>

    <section class="space-y-4 text-base">
      <H2>Awards</H2>

      {awards.length > 0 ? (
        <ul class="text-neutral-200 space-y-2">
          {awards.map((a: Award) => (
            <li>
              <span class="prose prose-invert max-w-none leading-none prose-base md:prose-lg xl:prose-xl">{a.title}</span>
              {a.year && <span> ({a.year})</span>}
              {a.description && <span> — {a.description}</span>}
            </li>
          ))}
        </ul>
      ) : (
        <p class="text-neutral-400">No awards yet.</p>
      )}
    </section>
  </div>
</InfoLayout>