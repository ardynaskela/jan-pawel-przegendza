---
import H1 from "../components/h1.astro";
import InfoLayout from "../layouts/InfoLayout.astro";
import { getEntry } from "astro:content";

type Award = {
  title: string;
  year?: number;
  description?: string;
};

const entry = await getEntry("about", "about");
if (!entry) throw new Error("Missing about entry: src/content/about/about.md");

const { Content } = await entry.render();

const title = entry.data.title ?? "Jan Paweł Przegendza";
const awards: Award[] = entry.data.awards ?? [];

const imageSrc = entry.data.photo ?? "/uploads/jan-przegendza.jpg";
const imageAlt = entry.data.photoAlt ?? title;
---

<InfoLayout imageSrc={imageSrc} imageAlt={imageAlt}>
  <div class="space-y-16">
    <section class="space-y-4 sm:space-y-12">
      <H1>{title}</H1>

      <div class="prose prose-invert prose-lg max-w-none">
        <Content />
      </div>
    </section>

    <section class="space-y-2 text-base sm:text-lg">
      <h2 class="text-neutral-400 underline underline-offset-4 decoration-neutral-400">
        Awards
      </h2>

      {awards.length > 0 ? (
        <ul class="text-neutral-300 list-disc list-outside pl-5 space-y-1">
          {awards.map((a: Award) => (
            <li>
              <span class="font-medium text-neutral-200">{a.title}</span>
              {a.year && <span class="text-neutral-400"> ({a.year})</span>}
              {a.description && <span class="text-neutral-400"> — {a.description}</span>}
            </li>
          ))}
        </ul>
      ) : (
        <p class="text-neutral-400">No awards yet.</p>
      )}
    </section>
  </div>
</InfoLayout>